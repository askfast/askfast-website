define(["modals/modals"],function(e){e.factory("AskFast",["$resource","$q","$location","$rootScope","Storage","Session","MD5",function(e,t,n,r,i,s,o){var u=e(r.config.host+"/:action/:level",{},{register:{method:"GET",params:{action:"register",name:"",username:"",password:"",phone:"",verification:""}},userExists:{method:"GET",params:{action:"user_exists",username:""}},registerVerify:{method:"GET",params:{action:"register_verify",id:"",code:""}},resendVerify:{method:"GET",params:{action:"resend_verify",code:"",verification:""}},login:{method:"GET",params:{action:"login",username:"",password:""}},logout:{method:"GET",params:{action:"logout"}},authorizedApp:{method:"GET",params:{action:"authorized_app"}},info:{method:"GET",params:{action:"info"}},getDialog:{method:"GET",params:{action:"dialog"}},createDialog:{method:"POST",params:{action:"dialog"}},getAdapters:{method:"GET",params:{action:"adapter"}},createAdapter:{method:"POST",params:{action:"adapter",id:""}},freeAdapters:{method:"GET",params:{action:"free_adapters"}},key:{method:"GET",params:{action:"key"}},getAccessToken:{method:"POST",params:{action:"keyserver",level:"token"}}}),a=e("http://char-a-lot.appspot.com/rpc",{},{request:{method:"POST",params:{}}});return u.prototype.login=function(e){var n=t.defer();return u.login({username:e.email,password:o(e.password)},function(e){n.resolve(e)},function(e){n.resolve({error:e})}),n.promise},u.prototype.register=function(e){var n=t.defer();return u.register({name:e.user.name.full(),username:e.user.email,password:e.passwords.first,phone:e.user.phone,verification:"SMS"},function(e){n.resolve(e)},function(e){n.resolve({error:e})}),n.promise},u.prototype.userExists=function(e){var n=t.defer();return u.userExists({username:e},function(e){n.resolve(e)},function(e){n.resolve({error:e})}),n.promise},u.prototype.verify=function(e){var n=t.defer();return u.registerVerify({code:e.verification.code,id:localStorage.getItem("data.verification.id")},function(e){n.resolve(e)},function(e){n.resolve({error:e})}),n.promise},u.prototype.resend=function(){var e=t.defer();return u.resendVerify({code:localStorage.getItem("data.verification.id"),verification:"SMS"},function(t){e.resolve(t)},function(t){e.resolve({error:t})}),e.promise},u.prototype.logout=function(){var e=t.defer();return u.process(null,function(t){e.resolve(t)},function(t){e.resolve({error:t})}),e.promise},u.prototype.contact=function(e){var n=t.defer(),r={message:e.message,sender:e.name+" "+e.surname+" <"+e.email+">",subject:"New message from AskFast, related to: "+e.subject};return a.request({},{method:"outboundCallWithMap",params:{adapterID:"2dbe5b60-154a-11e3-b728-00007f000001",addressMap:{"abektes@ask-cs.com":"Contact Inquiry"},url:"http://askfastmarket1.appspot.com/resource/question/comment?message="+encodeURIComponent(r.message),publicKey:"",privateKey:"",senderName:r.sender,subject:r.subject}},function(e){n.resolve(e)},function(e){n.resolve({error:e})}),n.promise},new u}])});